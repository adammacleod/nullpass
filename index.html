
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NullPass provides you with a unique password for every service you use without the cumbersome task of managing a password file!">
    <meta name="author" content="Adam MacLeod">
    <link rel="shortcut icon" href="favicon.ico">

    <title>NullPass</title>
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <style>
      input {
        margin-bottom: 4px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row">
        
        <div class="col-xs-12 col-sm-4 col-sm-push-8">
          <h1>&#8709;Pass</h1>
          <form role="form">
            <input type="password" id="master"   class="form-control" placeholder="Master Password" required autofocus>
            <input type="text"     id="domain"   class="form-control" placeholder="Domain" required>
            <input type="number"   id="length"   class="form-control" value="12" required>
            <input type="text"     id="password" class="form-control well well-sm" onclick="this.select();">
          </form>  
        </div><!-- /column -->

        <div class="col-xs-12 col-sm-8 col-sm-pull-4">
          <div id="about">
            <h1>What is &#8709;Pass?</h1>
            <h2>Easy</h2>
            <p>
              NullPass is a password manager that doesn't require you to manage a password file. This is accomplished by combining a single master password with a site specific token (often domain name) to generate a unique password. This password is cryptographically secure and your original password is unrecoverable should an attacker manage to obtain your unique site password. This means an attack on one of the sites you visit will not disclose your password to any other services - keeping your accounts safe.
            </p>

            <h2>Secure</h2>
            <p>
              NullPass does not store any information that you enter, in fact your passwords never even leave your computer! When you enter information into the NullPass form there is some client side code that exectues <strong>inside your own browser</strong> which does not transmit your information to our servers or the Internet at all.
            </p>

            <h2>Open</h2>
            <p>
              If you are interested, NullPass works by calculating <code>SHA-512("length" + "your password" + "domain")</code> and truncating the result to <em>length</em>. You can see this in effect by viewing the source of this webpage, or you can view/fork the project on <a href="https://github.com/adammacleod/nullpass">GitHub</a>!
            </p>
            <p>
              NullPass stands on the shoulders of giants. The following projects were instrumental to the creation of NullPass:
              <a href="http://caligatio.github.io/jsSHA/">jsSHA</a>, 
              <a href="http://getbootstrap.com/">Bootstrap</a>,
              <a href="http://jquery.com/">jQuery</a> &amp;
              <a href="https://github.com/">GitHub</a>.
            </p>
          </div>

          <div id="contact">
            <h1>Contact</h1>
            <p>I'm Adam and you can visit me at <a href="http://adam.macleod.id.au/">adam.macleod.id.au</a>, <a href="https://github.com/adammacleod">GitHub</a> or fire off an <a href="mailto:adam@macleod.id.au">email</a>.</p>
          </div>
        </div><!-- /column -->

      </div><!-- /row -->
    </div> <!-- /container -->

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="jsSHA/sha512.js"></script>
    
    <script>
      function generatePassword(master, domain, length) {
        var pass = length + master + domain;
        var shaObj = new jsSHA(pass, "TEXT");
        var hash = shaObj.getHash("SHA-512", "B64");
        return hash.substring(0,length);
      }

      function updatePassword(){
        var master = $('#master')[0].value;
        var domain = $('#domain')[0].value;
        var length = Math.floor($('#length').val());

        $('#password').val(generatePassword(master, domain, length));
      }

      $(document).ready(function() {
        $('.form-control').keyup(updatePassword).mouseup(updatePassword);
      });
    </script>

    <script>
      // Tests will run if the user visits #test
      if(window.location.hash && window.location.hash.substring(1) === "test") {
          var passed = 0;
          var failed = 0;

          function assert(condition, message) {
              if (condition) {
                console.log("Test Passed: " + message);
                passed++;
              } else {
                console.log("Test FAILED: " + message);
                failed++;
              }
          }
          
          assert(generatePassword('','',12) === 'Wq20VSDc2HJr', 'Empty master, Empty domain');
          assert(generatePassword('adam','',12) === 'g/hEayKhDjJx', 'Filled master, Empty domain');
          assert(generatePassword('','google.com',12) === 'ssVncV+zuHRF', 'Empty master, Fmpty domain');
          assert(generatePassword('adam','google.com',12) === 'sRWM+U25+Rpt', 'Filled master, Filled domain');

          assert(generatePassword('adam','google.com',12) !== generatePassword('adam','yahoo.com',12), 'Generated passwords with equal masters are not equal');
          assert(generatePassword('adam','google.com',12) !== generatePassword('ben','google.com',12), 'Generated passwords with equal domains are not equal');

          assert(generatePassword('adam','google.com',0) === '', 'length=0');
          assert(generatePassword('adam','google.com',1) === '3', 'length=1');
          assert(generatePassword('adam','google.com',8) === '7TiR0twb', 'length=8');
          assert(generatePassword('adam','google.com',80) === 'tGcBzL1/KNC1/nFq4xWiZteSAJwJJ5iYO4Ue3GorjrJHyv9GFGVRG3kKhAV8vSZWAeYkKQ9lnYdDC4QA', 'length=80');

          if (failed) {
            console.log(failed + "/" + (passed + failed) + " FAILED TESTS!");
          } else {
            console.log(passed + "/" + (passed + failed) + " tests completed successfully!");
          }
      }
    </script>
  </body>
</html>